[pytest]
# Phase 8: Worker Service Test Configuration

# Test discovery
python_files = test_*.py
python_classes = Test*
python_functions = test_*
testpaths = .

# Asyncio plugin
asyncio_mode = auto

# Markers for organizing tests
markers =
    asyncio: marks tests as async (deselect with '-m "not asyncio"')
    unit: Unit tests for individual components
    integration: Integration tests across components
    slow: Marks tests as slow (deselect with '-m "not slow"')
    phi: PHI detection and validation tests
    quality_gate: Quality gate evaluation tests
    agents: Agent execution tests
    rag: RAG retrieval tests

# Output options
addopts = 
    -v
    --strict-markers
    --tb=short
    --color=yes
    -ra

# Timeout for tests (30 seconds)
timeout = 30

# Coverage options
[coverage:run]
source = ../src
omit = 
    */tests/*
    */test_*.py
    **/__pycache__/*

[coverage:report]
precision = 2
skip_covered = False
