# ResearchFlow AI Endpoint Inventory

**Created:** January 30, 2026
**Status:** Phase 1 Audit Complete
**Linear Issue:** ROS-80

---

## Executive Summary

Complete inventory of all AI endpoints in ResearchFlow production codebase, mapped to providers, locations, task types, and customization strategies.

---

## Current AI Provider Configuration

### Active Providers (12 Tools)
| Provider | Type | Status |
|----------|------|--------|
| **Claude (Anthropic)** | API | Active |
| **GPT-4 (OpenAI)** | API | Active |
| **Grok (xAI)** | API | Active |
| **Mercury** | API | Active |
| **LM Studio** | Local | Active |
| **Ollama** | Local | Active |
| **Context7** | MCP | Active |
| **Figma AI** | MCP | Active |
| **Sourcegraph** | API | Active |
| **Cursor** | IDE | Active |
| **Continue.dev** | CLI | Active |
| **Codex CLI** | Terminal | Active |

---

## Endpoint Inventory by Service

### Orchestrator Service (services/orchestrator/)

| Endpoint | Provider | Task Type | Custom Candidate |
|----------|----------|-----------|------------------|
| POST /api/papers/:id/copilot | Claude | RAG Query | Yes - Expand RAG |
| POST /api/papers/:id/refine | OpenAI | Generation | Yes - Fine-tune |
| POST /api/papers/:id/analyze | Claude | Analysis | Yes - Custom Agent |
| POST /api/projects/:id/suggest | GPT-4 | Recommendations | Yes - Local Model |
| POST /api/stages/:id/execute | Claude | Workflow | Yes - LangGraph Agent |
| GET /api/guidelines/check | OpenAI | Classification | Yes - Local Model |

### Worker Service (services/worker/)

| Function | Provider | Task Type | Status |
|----------|----------|-----------|--------|
| DataPrepAgent | Claude | Multi-step | Implemented |
| AnalysisAgent | Claude | Multi-step | Implemented |
| QualityAgent | Claude | Multi-step | Implemented |
| IRBAgent | Claude | Multi-step | Implemented |
| ManuscriptAgent | Claude | Multi-step | Implemented |
| copilot_query() | Claude | RAG | Expand RAG |
| refine_manuscript() | OpenAI | Generation | Fine-tune |
| detect_phi() | Local | Classification | Enhance |

### AI Router Package (packages/ai-router/)

| Component | Current Tiers | Custom Strategy |
|-----------|---------------|-----------------|
| AIRouter | CLOUD, LOCAL, EDGE | Add CUSTOM tier |
| CloudDispatcher | Anthropic, OpenAI | Feature flags |
| LocalDispatcher | Ollama, LM Studio | Enhance |
| EdgeDispatcher | WebLLM | Keep |
| CustomDispatcher | LangGraph Agents | Create |

---

## Categorization by AI Strategy

### Category 1: Knowledge-Intensive -> Expand RAG
- /api/papers/:id/copilot
- Literature review workflow
- Citation lookup

### Category 2: Sequential/Multi-step -> LangGraph Agents
- DataPrep Agent (Stages 1-5) - Complete
- Analysis Agent (Stages 6-9) - Complete
- Quality Agent (Stages 10-12) - Complete
- IRB Agent (Stages 13-14) - Complete
- Manuscript Agent (Stages 15-20) - Complete
- Stats Agent - Planned
- Conference Agent - Planned

### Category 3: Generative -> Fine-tuned Models
- Abstract writing (Llama-3.1-8B + LoRA)
- Manuscript refinement (Llama-3.1-8B + LoRA)
- Proposal drafts (Mistral-7B + QLoRA)

### Category 4: Classification -> Local Models
- PHI Detection (Fine-tuned classifier)
- Topic Tagging (BERT-based)
- Guideline Check (Domain-specific)

### Category 5: Code Generation -> Local Ollama
- Script generation (CodeLlama)
- Data transforms (DeepSeek Coder)
- SQL queries (SQLCoder)

---

## Migration Priority Matrix

### P1 - Critical Path (Week 1-2)
- Vector DB Setup (ROS-81)
- CUSTOM Tier (Router)
- Feature Flags

### P2 - High Priority (Week 3-4)
- PDF Copilot RAG (ROS-84)
- Manuscript Enhancement
- Stats Agent

### P3 - Medium Priority (Week 5-6)
- Conference Agent
- Fine-tuning Pipeline (ROS-82)
- A/B Testing

---

## Key File Locations

### Agent Implementations
- services/worker/src/agents/dataprep/agent.py (612 lines)
- services/worker/src/agents/analysis/agent.py
- services/worker/src/agents/quality/agent.py
- services/worker/src/agents/irb/agent.py
- services/worker/src/agents/manuscript/agent.py

### Configuration Files
- .cursorrules (AI assistant patterns)
- docs/AI_ECOSYSTEM_GUIDE.md (Complete tool reference)
- docker-compose.yml (Service definitions)

---

## Verification Checklist

- [x] Anthropic API calls mapped
- [x] OpenAI API calls mapped
- [x] Local model calls mapped (Ollama)
- [x] Agent implementations verified (5/5 complete)
- [x] Router tiers documented
- [x] Categories assigned
- [x] Migration priorities set
- [ ] Training data inventoried
- [ ] Compute requirements estimated
- [ ] Feature flags implemented

---

## Related Documents

- Master Plan: RESEARCHFLOW_AI_CUSTOMIZATION_MASTER_PLAN.md
- Notion Tracker: AI Customization Execution Tracker
- Linear Issues: ROS-80 through ROS-85

---

*Generated by Claude Cowork - Phase 1 Audit - January 30, 2026*
